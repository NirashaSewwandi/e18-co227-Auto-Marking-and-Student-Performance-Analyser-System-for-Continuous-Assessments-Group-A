"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1781],{1781:function(e,t,n){n.d(t,{VL:function(){return z}});var r=n(5152),o=n(67294),i=n(96701),s=n(26630),a=n(25021),c=n(67380),u=n(37813),l=n(73213),d=n(59499),p=n(50029),f=n(87794),g=n.n(f),v=n(40821),y=n(357),m=n(51741),b=n(95944),h=n(83032),O=n(83403),C=n(98695),P=n(98108),S=n(73500),w=n(3299),T=n(77748),I=n(64918),A=n(32655),k=n(8924),j=n(69089),D=n(55978),x=function(e){var t=e.queryParams;return(0,y.nS)({queryParams:t}).formattedUrl};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t=e.assetId,n=e.asset,r=n.id,o=n.tier,i=void 0===o?10:o,s=n.src,a=n.aspect,c=n.width,u=n.height;return{metadata:{notes:{media_id:t,alpha_num_id:r,rex_id:r,media_type:b.gP,tier:i,media:{aspect:a,width:c,height:u,url:s}}}}},q=function(){var e=(0,p.Z)(g().mark((function e(t){var n,r,o,i,s,c,u,l,d,p,f,v,m;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.isRexEditorial,o=t.collectionId,i=t.verificationCode,s=t.setAsCover,c=t.firstAsset,u=t.collectionType,(l=(0,a.A8)(c))===b.VT){e.next=4;break}return e.abrupt("return");case 4:return d={id:o,verificationCode:i,collectionType:u},p=(0,y.Yz)({queryParams:d}).formattedUrl,e.next=8,k.uS.get(p).then((function(e){return(0,j.O)(e.data)||{}}));case 8:if(null!==(f=e.sent)&&void 0!==f&&null!==(n=f.coverItem)&&void 0!==n&&n.id){e.next=14;break}return v=(0,a.OP)({asset:c,isRexEditorial:r}),m=(0,S.Q)({collectionId:o,mappedAssetType:l,assetId:v}),e.next=14,s({collection:{id:o},mediaItem:{id:m}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=n(69648),U=n(83023),R=n(4730),B=n(85893),J=["isOpen"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V=(0,r.default)((function(){return Promise.all([n.e(98940),n.e(72578),n.e(38396),n.e(55296),n.e(7292),n.e(38799),n.e(39803),n.e(52663),n.e(11514),n.e(53034),n.e(63779),n.e(80158),n.e(24053)]).then(n.bind(n,6923)).then((function(e){return e.CollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[6923]}}}),G=function(e){var t=e.isOpen,n=(0,R.Z)(e,J);return(0,l.B)(t)&&(0,B.jsx)(V,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},L=(0,r.default)((function(){return n.e(54296).then(n.bind(n,54296)).then((function(e){return e.LazyAddToCollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[54296]}}}),F=(0,r.default)((function(){return n.e(5980).then(n.bind(n,5980)).then((function(e){return e.Snackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[5980]}}}),H=function(e){var t=e.assets,n=e.assetType,r=e.collectionId,s=e.collectionTitle,a=e.gridItems,c=e.isDialogActive,u=e.isSnackBarOpen,d=e.onAddToCollections,p=e.onAlertSnackbarClose,f=e.onAddToCollectionsComplete,g=e.redirectToCDPAction,v=e.setIsDialogActive,y=e.showCopyToModalTitle,m=e.status,b=e.verificationCode,h=e.pageSection,O=(0,U.p)(i.vb),C=(0,U.p)(i.pG),P=(0,l.B)(t),S=(0,o.useCallback)((function(){return v(!1)}),[v]);return P?O||C?(0,B.jsx)(L,{onClose:S,isOpen:c,items:t,onAddToCollectionsComplete:f,pageSection:h}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(G,{assets:t,assetType:n,collectionId:r,gridItems:a,isOpen:c,onAddToCollections:d,setIsDialogActive:v,showCopyToModalTitle:y,pageSection:h}),(0,B.jsx)(F,{assetType:n,collectionId:r,collectionTitle:s,isOpen:u,onAlertSnackbarClose:p,redirectToCDPAction:g,status:m,verificationCode:b})]}):null};H.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var z=function(e){var t=e.initialAssetType,n=(0,o.useState)(!1),r=n[0],i=n[1],l=(0,o.useState)(!1),f=l[0],j=l[1],_=(0,o.useState)(!1),U=_[0],R=_[1],B=(0,o.useState)(""),J=B[0],N=B[1],V=(0,o.useState)(null),G=V[0],L=V[1],F=(0,o.useState)(t),z=F[0],Q=F[1],W=(0,o.useState)(null),X=W[0],Y=W[1],K=(0,o.useState)(null),$=K[0],ee=K[1],te=(0,o.useState)(null),ne=te[0],re=te[1],oe=(0,M.B)(),ie=(0,c.cM)(),se=(0,u.L)(),ae=(0,o.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:se}),ce=ae[0],ue=ae[1],le=function(){var e=(0,o.useState)({status:"",error:void 0}),t=e[0],n=e[1],r=(0,o.useState)(""),i=r[0],s=r[1],c=(0,o.useState)(""),u=c[0],l=c[1],f=(0,T.J)(),j=(0,D.w)().setAsCover,_=(0,I.D)().isBrandSstk,M=(0,A.yh)().analytics,U=(0,C.UM)(M),R=(0,o.useCallback)(function(){var e=(0,p.Z)(g().mark((function e(t){var r,o,i,c,u,p,C,T,I,A,D,M,R,B,J,N,V,G,L,F,H,z,Q,W;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.assets,o=t.assetType,i=t.gridItems,c=t.groupedOptions,u=t.id,p=t.title,C=t.verificationCode,T=t.pageSection,I=t.listId,A=(0,P.wZ)({assetType:o,isBrandSstk:_}),e.prev=2,n({status:m.MR,error:void 0}),D=(0,a.Xo)(o),M=u,R=C,c&&c.length&&(B=c.find((function(e){return e.title===p})))&&(M=B.id,R=B.verificationCode),M){e.next=19;break}return J=(0,y.A6)().formattedUrl,N={data:{attributes:{title:p,collectionType:A,isPublic:!1},type:h.Ul}},e.next=13,k.uS.post(J,N);case 13:V=e.sent,G=V.data,L=G.id,F=G.attributes.verificationCode,M=L,R=F;case 19:return H={data:r.map((function(e){var t=(0,a.OP)({asset:e,isRexEditorial:D}),n=(0,a.A8)(e);return Z({type:h.A8,id:(0,S.Q)({collectionId:M,mappedAssetType:n,assetId:t})},n===b.VT&&E({assetId:t,asset:e}))}))},z=(0,y.mp)({urlParams:{id:M},queryParams:{isRexEditorial:D}}).formattedUrl,Q=(0,w.y)(U),e.next=24,k.uS.post(z,H,Q?{headers:(0,d.Z)({},O.as,Q)}:void 0);case 24:return W=r[0],e.next=27,q({isRexEditorial:D,collectionId:M,verificationCode:R,setAsCover:j,firstAsset:W,collectionType:A});case 27:f({collectionId:M,collectionName:p,gridItems:i,assets:r,pageSection:T,listId:I}),s(M),l(R),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(2),n({status:m.cM,error:e.t0});case 35:return e.prev=35,e.next=38,(0,v.JG)(x({queryParams:{"filter[type]":A}}));case 38:return e.finish(35);case 39:case"end":return e.stop()}}),e,null,[[2,32,35,39]])})));return function(t){return e.apply(this,arguments)}}(),[f,j,U,_]);return{add:R,collectionId:i,setStatus:n,status:t,verificationCode:u}}(),de=le.add,pe=le.status,fe=le.collectionId,ge=le.verificationCode;(0,o.useEffect)((function(){return function(){return L(null)}}),[]),(0,o.useEffect)((function(){return function(){return Q("")}}),[]);var ve=(0,o.useCallback)((function(e){var t=e.formattedAssets,n=e.gridItems,r=e.isCopyToCollection,o=e.mappedAssetType,s=e.redirectToCollectionDetailsPage,a=e.pageSection,c=e.listId;Q(o),L(t),ee(a),re(c),r&&R(!0),n&&Y(n),s&&ue({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:s}),i(!0)}),[]);return(0,o.useEffect)((function(){(0,s.DZ)({showAddToCollectionModal:ve,isLoggedInUser:oe})}),[oe,ve]),{addToCollectionViewsProps:(0,o.useMemo)((function(){return{assets:G,pageSection:$,assetType:z,collectionId:fe,collectionTitle:J,gridItems:X,isDialogActive:r,isSnackBarOpen:f,onAddToCollections:function(e){var t=e.id,n=e.title,r=e.verificationCode,o=e.groupedOptions,s=e.pageSection;return N(n),i(!1),j(!0),de({assetType:z,assets:G,gridItems:X,groupedOptions:o,id:t,title:n,verificationCode:r,pageSection:s||$,listId:ne})},onAlertSnackbarClose:function(){return j(!1)},redirectToCDPAction:ce,setIsDialogActive:i,showCopyToModalTitle:U,status:pe,verificationCode:ge}}),[G,X,de,ne,$,z,fe,J,r,f,ce,U,pe,ge]),addToCollectionViewsHandler:(0,o.useCallback)((function(e){var t=e.assets,n=e.gridItems,r=e.isCopyToCollection,o=void 0!==r&&r,i=e.redirectToCollectionDetailsPage,c=e.pageSection,u=e.listId;if(oe){var l=function(e){return[].concat(e)}(t);ve({formattedAssets:l,gridItems:n,isCopyToCollection:o,mappedAssetType:(0,a.A8)(l[0]),redirectToCollectionDetailsPage:i,pageSection:c,listId:u})}else(0,s.JO)({assets:t,gridItems:n,signUpPath:ie})}),[oe,ve,ie]),AddToCollectionViews:H}}},26630:function(e,t,n){n.d(t,{DZ:function(){return a},JO:function(){return s}});var r=n(25021),o="add_to_collection_asset",i="add_to_collection_grid_items",s=function(e){var t=e.assets,n=e.gridItems,r=e.signUpPath;window&&(t&&window.sessionStorage.setItem(o,JSON.stringify(t)),n&&window.sessionStorage.setItem(i,JSON.stringify(n)),window.location=r)},a=function(e){var t=e.showAddToCollectionModal,n=e.isLoggedInUser;if(void 0!==n){if(n){var s=window.sessionStorage.getItem(o),a=window.sessionStorage.getItem(i),c=function(e){return e&&"undefined"!==e};if(c(s)&&c(a)){var u=JSON.parse(s),l=JSON.parse(a),d=[].concat(u);t({formattedAssets:d,gridItems:l,mappedAssetType:(0,r.A8)(d[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(o),window.sessionStorage.removeItem(i)}}},3299:function(e,t,n){n.d(t,{y:function(){return r}});var r=function(e){return[e.subPage,e.pageType].join("-")}},77748:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(67294),o=n(98695),i=n(32655),s=n(94428),a=function(){var e=(0,i.yh)().analytics,t=(0,s.Y)().getSearchContext;return(0,r.useCallback)((function(n){var r=n.collectionId,i=n.collectionName,s=n.gridItems,a=n.assets,c=n.pageSection,u=n.listId;e.productAddedToWishlist({products:a.map((function(e){return(0,o.bR)({asset:e,getSearchContext:t,gridItems:s,pageSection:c})})),wishlist_id:r,wishlist_name:i,list_id:null!==u&&void 0!==u?u:""})}),[e,t])}},67380:function(e,t,n){n.d(t,{Sl:function(){return x},Ov:function(){return D},cM:function(){return j}});var r,o,i=n(17674),s=n(4730),a=n(59499),c=n(11163),u=n(95944),l=n(11987),d=n.n(l),p="signup",f="login",g=(r={},(0,a.Z)(r,p,"/".concat(p)),(0,a.Z)(r,f,"/".concat(f)),r),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=void 0===t?{}:t,r=d().format({pathname:g.signup,query:n});return[r,r]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=void 0===t?{}:t,r=d().format({pathname:g.login,query:n});return[r,r]},m=n(31955),b=n(11752),h="-undefined",O=(0,b.default)().publicRuntimeConfig.authSsoCookieName,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cookies;return(t?t[O]:m.Z.get(O))===h},P=n(64918),S=n(25361),w=["landing_page"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=(o={},(0,a.Z)(o,u.k4,u.k4),(0,a.Z)(o,u.pX,u.gW),(0,a.Z)(o,u.gP,u.gP),(0,a.Z)(o,u.xF,u.xF),o),k=function(e){var t=e.getPathProps,n=e.query,r=(n=void 0===n?{}:n).landing_page,o=(0,s.Z)(n,w),a=(0,c.useRouter)().asPath,u=(0,P.D)(),l=u.isBrandSstk,d=u.isBrandEnterprise,p=function(e){var t=(0,S.qw)(e);return A[t]}(a),f=r||(d?"/"===a?null:a:null),g=t({query:I(I(I({},l&&{site:p}),f&&{landing_page:f}),o)});return(0,i.Z)(g,1)[0]},j=function(e){return k({getPathProps:v,query:e})},D=function(){return k({getPathProps:y})},x=function(e){var t=e.cookies,n=e.queryParams,r=e.signUpView,o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookies,t=C({cookies:e});return{getPathProps:t?y:v,isSignUp:!t}}({cookies:t}),i=o.getPathProps,s=o.isSignUp;return k({getPathProps:i,query:I(I({},n),s&&r?{view:r}:{})})}},55978:function(e,t,n){n.d(t,{w:function(){return d}});var r=n(50029),o=n(87794),i=n.n(o),s=n(67294),a=n(357),c=n(51741),u=n(83032),l=n(8924),d=function(){var e=(0,s.useState)({status:"",error:void 0}),t=e[0],n=e[1],o=(0,s.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){var r,o,s,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection,o=t.mediaItem,s=(0,a.df)({urlParams:{id:r.id}}).formattedUrl,d={data:{id:r.id,relationships:{"cover-item":{data:{id:"".concat(o.id),type:u.A8}}},type:u.Ul}},e.prev=3,n({status:c.MR,error:void 0}),e.next=7,l.uS.patch(s,d);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n({status:c.cM,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{status:t,setStatus:n,setAsCover:o}}}}]);
//# sourceMappingURL=1781-8aab0fbb781326d3.js.map